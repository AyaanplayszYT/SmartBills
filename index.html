<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SmartBills 2.0</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/src/style.css" />
  <!-- html2pdf for PDF generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
  </head>
  <body>
    <div class="app">
      <aside class="sidebar">
        <div class="logo">SmartBills</div>
        <nav>
          <button class="nav-btn active" data-view="home">Home</button>
          <button class="nav-btn" data-view="invoices">Invoices</button>
          <button class="nav-btn" data-view="payments">Payments</button>
          <button class="nav-btn" data-view="settings">Settings</button>
        </nav>
        <div class="sidebar-bottom">
          <button id="newInvoiceBtn" class="btn primary">+ New Invoice</button>
          <div class="tiny muted">Local only • saved in browser</div>
        </div>
      </aside>
      <main class="main">
        <header class="topbar">
          <div class="left">
            <input id="search" placeholder="Search invoices or clients..." />
          </div>
        </header>
        <section id="viewHome" class="view page active">
          <h1>Dashboard</h1>
          <div class="grid">
            <div class="card stats">
              <h3>Quick stats</h3>
              <div class="stats-grid">
                <div class="stat">
                  <div class="stat-title">Invoices</div>
                  <div id="statInvoices" class="stat-value">0</div>
                </div>
                <div class="stat">
                  <div class="stat-title">Outstanding</div>
                  <div id="statOutstanding" class="stat-value">$0.00</div>
                </div>
                <div class="stat">
                  <div class="stat-title">Paid</div>
                  <div id="statPaid" class="stat-value">$0.00</div>
                </div>
                <div class="stat">
                  <div class="stat-title">Next due</div>
                  <div id="statNextDue" class="stat-value">—</div>
                </div>
              </div>
            </div>
            <div class="card howto">
              <h3>How to use SmartBills</h3>
              <ol>
                <li>Click <strong>New Invoice</strong> to create an invoice (add client, amount, due date).</li>
                <li>Choose recurrence if you want auto-next due date (daily/weekly/monthly).</li>
                <li>Generate PDF with <em>Generate PDF</em>, email or share the file yourself.</li>
                <li>Mark invoices as <em>Paid</em> when settled. Balances update automatically.</li>
                <li>Go to Settings to export/import data or reset the app.</li>
              </ol>
            </div>
            <div class="card reminders">
              <h3>Reminders & due soon</h3>
              <div id="remindersList" class="muted">No upcoming due invoices.</div>
              <div class="hint muted">Enable browser notifications in Settings for push reminders.</div>
            </div>
          </div>
          <div class="card full invoices-preview">
            <div class="row">
              <h3>Recent invoices</h3>
              <div class="actions">
                <button id="downloadAllPdf" class="btn outline">Download all PDFs</button>
                <button id="exportJson" class="btn ghost">Export JSON</button>
              </div>
            </div>
            <div id="recentInvoices" class="list muted">No invoices yet — start by creating one.</div>
          </div>
        </section>
        <section id="viewInvoices" class="view page">
          <h1>Invoices</h1>
          <div class="card">
            <div class="row-between">
              <input id="filterClient" placeholder="Filter by client..." />
              <div class="controls">
                <button id="btnAddInvoice" class="btn primary">+ New Invoice</button>
                <button id="btnBulkPdf" class="btn outline">Batch PDF</button>
              </div>
            </div>
            <div id="invoicesList" class="list muted">No invoices yet.</div>
          </div>
        </section>
        <section id="viewPayments" class="view page">
          <h1>Payments</h1>
          <div class="card">
            <h3>Payment methods</h3>
            <div id="paymentsList" class="list muted">No payment methods. Add a card to include it on invoices.</div>
            <div class="row" style="margin-top:12px">
              <button id="addPaymentBtn" class="btn outline">Add card</button>
              <button id="exportPayments" class="btn ghost">Export cards</button>
            </div>
          </div>
        </section>
        <section id="viewSettings" class="view page">
          <h1>Settings</h1>
          <div class="card">
            <h3>Preferences</h3>
            <label class="row-between"><span>Enable reminders (browser)</span><input id="enableNotifs" type="checkbox" /></label>
            <hr />
            <h3>Data</h3>
            <div class="row">
              <button id="exportAllBtn" class="btn outline">Export all (JSON)</button>
              <input id="importFile" type="file" accept=".json" />
              <button id="resetBtn" class="btn ghost danger">Reset everything</button>
            </div>
            <hr />
            <div class="muted">Version 2.0 • Frontend only • Local storage</div>
          </div>
        </section>
      </main>
    </div>
    <!-- Invoice Modal -->
    <div id="modalInvoice" class="modal">
      <div class="modal-panel">
        <h2 id="modalTitle">New invoice</h2>
        <label>Client name
          <input id="invClient" placeholder="Client or friend name" />
        </label>
        <label>Amount (currency)
          <input id="invAmount" type="number" step="0.01" placeholder="34.50" />
        </label>
        <label>Due date
          <input id="invDue" type="date" />
        </label>
        <label>Recurrence
          <select id="invRecurrence">
            <option value="none">None</option>
            <option value="daily">Daily</option>
            <option value="weekly">Weekly</option>
            <option value="monthly">Monthly</option>
          </select>
        </label>
        <label>Notes (optional)
          <textarea id="invNotes" rows="3" placeholder="Payment details / notes"></textarea>
        </label>
        <div class="modal-actions">
          <button id="saveInvoice" class="btn primary">Save & Generate</button>
          <button class="btn ghost" data-close>Cancel</button>
        </div>
      </div>
    </div>
    <!-- Payment Modal -->
    <div id="modalPayment" class="modal">
      <div class="modal-panel">
        <h2>Add payment method</h2>
        <label>Card name (Visa / MC)
          <input id="cardName" placeholder="Visa" />
        </label>
        <label>Last 4 digits
          <input id="cardLast4" maxlength="4" placeholder="9373" />
        </label>
        <label>Expiry (MM/YYYY)
          <input id="cardExpiry" placeholder="10/2026" />
        </label>
        <div class="modal-actions">
          <button id="saveCard" class="btn primary">Save card</button>
          <button class="btn ghost" data-close>Cancel</button>
        </div>
      </div>
    </div>
    <!-- Hidden invoice template for PDF -->
    <div id="invoiceTemplate" style="display:none">
      <div class="invoice">
        <header class="inv-head">
          <div>
            <h2 id="pdfTitle">Invoice</h2>
            <h2>noi</h2>
            <div id="pdfDate"></div>
          </div>
          <div id="pdfMeta"></div>
        </header>
        <section id="pdfBody"></section>
        <footer id="pdfFooter">Generated by SmartBills</footer>
      </div>
    </div>
    <div class="watermark">made by Mistiz911</div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
